<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<title>e:/server/test/tplt_mock_SUITE.erl</title>
</head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
<a name="1"/>    1: <i>%%%-------------------------------------------------------------------</i>
<a name="2"/>    2: <i>%%% @author linyijie &lt;&gt;</i>
<a name="3"/>    3: <i>%%% @copyright (C) 2013, linyijie</i>
<a name="4"/>    4: <i>%%% @doc</i>
<a name="5"/>    5: <i>%%%</i>
<a name="6"/>    6: <i>%%% @end</i>
<a name="7"/>    7: <i>%%% Created : 11 Nov 2013 by linyijie &lt;&gt;</i>
<a name="8"/>    8: <i>%%%-------------------------------------------------------------------</i>
<a name="9"/>    9: <b>-module</b>(tplt_mock_SUITE).
<a name="10"/>   10: 
<a name="11"/>   11: <i>%% Note: This directive should only be used in test suites.</i>
<a name="12"/>   12: <b>-compile</b>(export_all).
<a name="13"/>   13: 
<a name="14"/>   14: <b>-include_lib</b>(&quot;common_test/include/ct.hrl&quot;).
<a name="15"/>   15: <b>-include_lib</b>(&quot;eunit/include/eunit.hrl&quot;).
<a name="16"/>   16: <b>-include</b>(&quot;test_helper.hrl&quot;).
<a name="17"/>   17: <b>-include</b>(&quot;packet_def.hrl&quot;).
<a name="18"/>   18: 
<a name="19"/>   19: <i>%%--------------------------------------------------------------------</i>
<a name="20"/>   20: <i>%% COMMON TEST CALLBACK FUNCTIONS</i>
<a name="21"/>   21: <i>%%--------------------------------------------------------------------</i>
<a name="22"/>   22: 
<a name="suite-0"/><a name="23"/>   23: <b>suite</b>() -&gt;
<a name="24"/>   24:     [{timetrap,{minutes,10}}].
<a name="25"/>   25: 
<a name="init_per_testcase-2"/><a name="26"/>   26: <b>init_per_testcase</b>(_TestCase, Config) -&gt;
<a name="27"/>   27:     Config.
<a name="28"/>   28: 
<a name="end_per_testcase-2"/><a name="29"/>   29: <b>end_per_testcase</b>(_TestCase, _Config) -&gt;
<a name="30"/>   30:     ok.
<a name="31"/>   31: 
<a name="all-0"/><a name="32"/>   32: <b>all</b>() -&gt;
<a name="33"/>   33:     [ {exports, Functions} | _ ] = ?MODULE:module_info(),
<a name="34"/>   34:     [ FName || {FName, _} &lt;- lists:filter(
<a name="35"/>   35:                                fun ({module_info,_}) -&gt; false;
<a name="36"/>   36:                                    ({all,_}) -&gt; false;
<a name="37"/>   37:                                    ({init_per_suite,1}) -&gt; false;
<a name="38"/>   38:                                    ({end_per_suite,1}) -&gt; false;
<a name="39"/>   39:                                    ({_,1}) -&gt; true;
<a name="40"/>   40:                                    ({_,_}) -&gt; false
<a name="41"/>   41:                                end, Functions)].
<a name="42"/>   42: 
<a name="43"/>   43: 
<a name="44"/>   44: <i>%%--------------------------------------------------------------------</i>
<a name="45"/>   45: <i>%% TEST CASES</i>
<a name="46"/>   46: <i>%%--------------------------------------------------------------------</i>
<a name="test_tplt_mock-1"/><a name="47"/>   47: <b>test_tplt_mock</b>(_Config) -&gt;
<a name="48"/>   48:     Data1 = {item, 1, &quot;item-1&quot;},
<a name="49"/>   49:     tplt_mock:find_mock(Data1),
<a name="50"/>   50:     Data1 = tplt:find(item, 1),
<a name="51"/>   51:     tplt_mock:stop(),
<a name="52"/>   52: 
<a name="53"/>   53:     Data2 = {a, 1, &quot;a&quot;},
<a name="54"/>   54:     Data3 = {b, 2, &quot;b&quot;},
<a name="55"/>   55:     tplt_mock:find_mock([Data2, Data3]),
<a name="56"/>   56:     Data2 = tplt:find(a, 1),
<a name="57"/>   57:     Data3 = tplt:find(b, 2),
<a name="58"/>   58:     ?assertException(error, {not_found_data, a, 3}, tplt:find(a, 3)),
<a name="59"/>   59:     tplt_mock:stop(),
<a name="60"/>   60: 
<a name="61"/>   61:     Data4 = [{a, 1}, {a, 2}, {a, 3}, {a, 4}, {a, 5}],
<a name="62"/>   62:     tplt_mock:get_all_mock(Data4),
<a name="63"/>   63:     Data4 = tplt:get_all(a),
<a name="64"/>   64:     ?assertException(error, {not_found_data, b}, tplt:get_all(b)),
<a name="65"/>   65:     ok.
</pre>
</body>
</html>
