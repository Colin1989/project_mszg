---------------------------------------作者：李慧琴--说明：主页入口界面--时间：2014-2-28-------------------------------------LayerMainEnter = {}local mLayerMainEnterRoot = nil -- add by fjut on 2014-03-19-- 更新竞技场推送消息气泡数量local msgNumLabel = nilLayerMainEnter.updateMsgNum = function(num)	if mLayerMainEnterRoot == nil then 		return	end	local gameRankNode = mLayerMainEnterRoot:getChildByName("Panel_arena")	if gameRankNode == nil or num <= 0 then		cclog("set msgNum fail, Node is nil or num is zero !")		return	end		-- 设置提醒数量	if msgNumLabel == nil then 		local msgTips = CommonFunc_getImgView("Msg_num.png")		msgTips:setPosition(ccp(200, 150))				gameRankNode:addChild(msgTips)		msgNumLabel = CommonFunc_getLabel(string.format("%d", num))		msgTips:addChild(msgNumLabel)	else		msgNumLabel:setText(string.format("%d", num))	endend-- add endlocal function  enterOtherScene(type,widget)	widgetName =widget:getName()	if type =="releaseUp" then		if widgetName == "Panel_arena"  then                   --竞技场			print("11")			LayerMain.switchPannel(LayerGameRankChoice)			-- 竞技场, add by fjut 2014-03-12		 --	setOthenSceneJson(this,jsonfile)		elseif 	widgetName == "Panel_auction"  then             --拍卖行			 print("22")		elseif 	widgetName == "Panel_mission"  then             --任务			 setConententPannelJosn(LayerTask, "TaskPanel.ExportJson")		elseif 	widgetName == "Panel_inscription"  then           --铭文大师		     print("铭文大师")			mLayerMainEnterRoot:removeAllChildren()			--[[			 local  panelContent = mLayerMainEnterRoot:getChildByName("Panel_mainEnter")	        tolua.cast(panelContent,"UILayout")	         panelContent:removeAllChildren()			]]--			local contentView = GUIReader:shareReader():widgetFromJsonFile("Rune_main.ExportJson")			contentView:setAnchorPoint(ccp(0.0,0.0))			--mLayerMainEnterRoot:addChild(contentView)				BackpackUIManage.init()			BackpackUIManage.addLayer("UI_runeMain")				--LayerRuneMain.init(mLayerMainEnterRoot,contentView)			--setOthenSceneJson(LayerRuneMain,"Rune_main.ExportJson")		elseif 	widgetName == "Panel_public"  then              --工会		       print("55")		elseif 	widgetName == "Panel_rankingList"  then          --排行榜		      print("66")		elseif 	widgetName == "Panel_activity"  then              --活动大使			  print("77")					end	end	end--动态加载json文件function  setOthenSceneJson(this,jsonfile)	local  panelContent = mLayerMainEnterRoot:getChildByName("Panel_mainenter")	tolua.cast(panelContent,"UILayout")	panelContent:removeAllChildren()		local contentView = GUIReader:shareReader():widgetFromJsonFile(jsonFile)	contentView:setAnchorPoint(ccp(0.0,0.0))	panelContent:addChild(contentView)	this.init(panelContent,contentView)endLayerMainEnter.init = function (RootView)      	 print("LayerMainEnter.init")	mLayerMainEnterRoot = RootView       local arena = mLayerMainEnterRoot:getChildByName("Panel_arena")           --竞技场    arena:registerEventScript(enterOtherScene)	    local auction=  mLayerMainEnterRoot:getChildByName("Panel_auction")         --拍卖行    auction:registerEventScript(enterOtherScene) 	    local  mission =  mLayerMainEnterRoot:getChildByName("Panel_mission")              --任务     mission:registerEventScript(enterOtherScene)	     local  inscription =  mLayerMainEnterRoot:getChildByName("Panel_inscription")     --铭文大师         inscription:registerEventScript(enterOtherScene)		local public = mLayerMainEnterRoot:getChildByName("Panel_public")                 --工会	public:registerEventScript(enterOtherScene)		local rankingList =  mLayerMainEnterRoot:getChildByName("Panel_rankingList")           --排行榜    rankingList:registerEventScript(enterOtherScene)	    local  activity =  mLayerMainEnterRoot:getChildByName("Panel_activity")           --活动大使    activity:registerEventScript(enterOtherScene)		-- add by fjut on 2014-03-19	-- 更新竞技场推送消息气泡数量	msgNumLabel = nil	cclog("消息数量："..LayerMain.getMsgNum())	LayerMainEnter.updateMsgNum(LayerMain.getMsgNum())	end			