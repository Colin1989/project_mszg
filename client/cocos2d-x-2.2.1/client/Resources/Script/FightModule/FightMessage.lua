------------------------------------------------------------------------ 作者: lewis hamilton-- 日期: 2014-05-20-- 描述: 战斗信息,如显示技能名,怪物所作操作,逃跑，隐身等一些信息提示----------------------------------------------------------------------FightMessage = {}local function localPrint(...)	if true then return end	lewisPrint("FightMessage", ...)endlocal function CBDelete(sender)	sender:getParent():removeChild(sender, true)endlocal function createFont(str)	local layer = CCLayer:create()	local label1 = CCLabelBMFont:create(str,  "font_skill_name.fnt")	layer:addChild(label1, 1)	label1:setColor(ccc3(255, 255, 0))	label1:setAnchorPoint(ccp(0.5, 0.5))		local label2 = CCLabelBMFont:create(str,  "font_skill_name.fnt")	layer:addChild(label2)	label2:setColor(ccc3(0, 0, 0))	label2:setAnchorPoint(ccp(0.5, 0.5))	label2:setPosition(ccp(2, -2))	--label2:setScale(1.2)		--[[	local arr = CCArray:create()	arr:addObject(CCFadeTo:create(0.3, 128))	arr:addObject(CCFadeTo:create(0.1, 255))	label2:runAction(CCRepeatForever:create(CCSequence:create(arr)))	]]--			layer:setAnchorPoint(ccp(0, 0))	return layerend--战斗信息 actionfunction FightMessage.playAction(sprite)	local arr = CCArray:create()	local scale = sprite:getScale()	sprite:setScale(0)    arr:addObject(CCSpawn:createWithTwoActions(CCScaleTo:create(0.15, 2.4 * scale), CCFadeIn:create(0.15)))	arr:addObject(CCScaleTo:create(0.1, scale))	arr:addObject(CCDelayTime:create(1.2))	arr:addObject(CCSpawn:createWithTwoActions(CCMoveBy:create(0.2, ccp(0, 50)), CCFadeOut:create(0.2)))	arr:addObject(CCCallFuncN:create(CBDelete))	sprite:runAction(CCSequence:create(arr))end--显示字function FightMessage.showWithFileName(filename, pos)	local layer = GameScene.getLayer("gs_message_layer")	local sprite = CCSprite:create(filename)	layer:addChild(sprite, 100)	sprite:setPosition(pos)	sprite:setScale(0.8)	FightMessage.playAction(sprite)end--显示字符function FightMessage.showWithString(str, pos)	local layer = GameScene.getLayer("gs_message_layer")	local label = createFont(str)	layer:addChild(label, 100)	label:setPosition(ccp(pos.x, pos.y - 50))	--label:setScale(1.1)	FightMessage.playAction(label)end--隐身function FightMessage.hidden(pos)	FightMessage.showWithFileName("fm_hidden.png", pos)end--破隐一击function FightMessage.breakHidden(pos)	FightMessage.showWithFileName("fm_break_hidden.png", pos)end--狂化function FightMessage.frantic(pos)	FightMessage.showWithFileName("fm_frantic.png", pos)end--重生function FightMessage.respawn(pos)	FightMessage.showWithFileName("fm_respawn.png", pos)end--偷钱function FightMessage.stealCoin(pos)	FightMessage.showWithFileName("fm_steal_coin.png", pos)end--自爆function FightMessage.baneling(pos)	FightMessage.showWithFileName("fm_baneling.png", pos)end--召唤function FightMessage.summon(pos)	FightMessage.showWithFileName("fm_summon.png", pos)end--虚弱光环function FightMessage.weakHalo(pos)	FightMessage.showWithFileName("fm_weak_halo.png", pos)end--反弹伤害function FightMessage.rebound(pos)	FightMessage.showWithFileName("fm_rebound.png", pos)end--肉盾function FightMessage.humanShield(pos)	FightMessage.showWithFileName("fm_human_shield.png", pos)end