------------------------------------------------------------------------ 作者：lewis-- 日期：2013-4-4-- 描述：放法动作----------------------------------------------------------------------StepCaster = class(BattleStep)--构造function StepCaster:ctor()	self.mRole 		= nil		--施法角色	self.mEffect	= nil		--特效	self.mSkillId	= 0	self.mName		= "caster"	self.mEffectSkillName	= nilend--初始化function StepCaster:init(role, id)	self.mRole = role	self.mSkillId = id	local groupId = role:getConfig("role_group_id")--组别id,0是玩家,1是怪物	local config = SkillConfig.getSkillBaseInfo(id)	--玩家并且对所有敌方单位使用的技能,才有全屏特效	if groupId == 0 and config.target == 4 then		local roleType = role:getConfig("role_type")		if roleType == 1 then			self.mEffect = EffectWarriorCast.new()		elseif roleType == 2 then			self.mEffect = EffectKnightCast.new()		elseif roleType == 3 then			self.mEffect = EffectShamanCast.new()		else			self.mEffect = EffectWizardCast.new()		end		self.mDuration = self.mEffect:duration()	else		self.mDuration = self.mRole:getDuration("magic")	end		local base = SkillConfig.getSkillBaseInfo(id)	self.mEffectSkillName = EffectSkillName.new()	self.mEffectSkillName:init(self.mRole:getMiddlePos(), base.name)	end--执行对应的操作function StepCaster:excute()	self.mRole:changeAnimateState("magic")	if self.mEffect then		self.mEffect:play()	end	self.mEffectSkillName:play()	self.mRole:useSkill(self.mSkillId)end