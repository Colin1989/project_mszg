------------------------------------------------------------------------ 作者：lewis-- 日期：2013-4-4-- 描述：普通攻击被击者受伤动作----------------------------------------------------------------------StepRoleHurt = class(BattleStep)--构造function StepRoleHurt:ctor()	self.mRole 		= nil		--受击的角色	self.mDamage	= nil		--伤害	self.mName		= "defender"end--初始化function StepRoleHurt:init(role, damage)	self.mRole		= role	self.mDamage 	= damage	self.mDuration = self.mRole:getDuration("hit")end--执行对应的操作function StepRoleHurt:excute()	local dp = self.mDamage:getData("damage")	if dp < 0 then		self.mRole:changeAnimateState("hit")	end		--闪避	if self.mDamage:getData("type") == "miss" then		self.mRole:changeBehaviorState("dodge")		local behavior = BehaviorInfo.new()		behavior:init("dodge", self.mRole:getBottomPos())		behavior:play()	end	self.mDamage:play()	self.mRole:settleDamage(dp)    --肉盾	if self.mRole:getConfig("behavior_name") == "human_shield" then		local behavior = BehaviorInfo.new()		behavior:init("human_shield", self.mRole:getBottomPos())		behavior:play()	endendStepRoleHurtReswapn = class(StepRoleHurt)function StepRoleHurtReswapn:ctor()end --初始化function StepRoleHurtReswapn:init(role, damage,realLife)	self.mRole		= role	self.mDamage 	= damage	self.mDuration = self.mRole:getDuration("hit")    self.mRealLife = realLifeendfunction StepRoleHurtReswapn:excute()	local dp = self.mDamage:getData("damage")	self.mDamage:play()    self.mRole:getDataInfo("attr"):initCurrentLife(self.mRealLife)    self.mRole.mInfoView:update("attr")end 