------------------------------------------------------------------------ 作者：lewis-- 日期：2013-4-4-- 描述：技能特效完后的受击动作----------------------------------------------------------------------StepAfterItemSkill = class(BattleStep)--构造function StepAfterItemSkill:ctor()	self.mRole 		= nil		--受击的角色	self.mDamage	= nil		--伤害	self.mSkillId	= 0	self.mLevel		= 0	self.mbBuff		= false	self.mName		= "after_skill"end--初始化function StepAfterItemSkill:init(role, damage, id, level, bBuff)	self.mRole		= role	self.mDamage 	= damage	self.mSkillId	= id	self.mLevel		= level	self.mbBuff		= bBuff	self.mDuration = self.mRole:getDuration("attack")end--执行对应的操作function StepAfterItemSkill:excute()	local dp = self.mDamage:getData("damage")    if self.mDamage:getData("type") == "miss" and dp <= 0 then       self.mRole:changeBehaviorState("dodge")	   local behavior = BehaviorInfo.new()	   behavior:init("dodge", self.mRole:getBottomPos())	   behavior:play()    end          	if dp < 0 then	    self.mRole:changeAnimateState("hit")    end   	self.mDamage:play()	--已上buff	if self.mbBuff then		--对目标上buff		self.mRole:updateInfoView("buff")		self.mRole:updateInfoView("skill")		self.mRole:changeShader()		self.mRole:changePortraits()	end    cclog("StepAfterItemSkill dp",dp)	self.mRole:settleDamage(dp)end