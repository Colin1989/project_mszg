------------------------------------------------------------------------ 作者：lewis-- 日期：2013-04-11-- 描述：xx门格子----------------------------------------------------------------------GridDoor = class(Grid)--构造function GridDoor:ctor()	self.mSriteDoor = nil	self.mbDoorOpened = falseend--绑定数据function GridDoor:bindData(data)end--事件驱动function GridDoor:onEvent()	if self.mbDoorOpened == false then		return	end	self:setConfig("event_name", "none")    if FightDateCache.getData("fd_copy_id") == FIRSTCOPYID then        GuideMgr.onMessage("empty")    end	FightMgr.nextFloor()end--显示门function GridDoor:closeDoor()	self.mbDoorOpened = false	local layer = GridMgr.getConfig("gmc_item_layer")	local sprite = CCSprite:create("door_closed.png")	layer:addChild(sprite)	sprite:setPosition(self:getConfig("position"))	self.mSriteDoor = sprite		--未打开门的粒子	local size = sprite:getContentSize()	local particle = CCParticleSystemQuad:create("fight_door_closed.plist")	sprite:addChild(particle)	particle:setPosition(ccp(size.width / 2, size.height / 2))		--打开迷雾	self:openGrid()	self:openFogMask()end--打开门function GridDoor:openDoor()	self:setConfig("event_name", "door")	self.mbDoorOpened = true	if self.mSriteDoor ~= nil then		self.mSriteDoor:removeFromParentAndCleanup(true)		self.mSriteDoor = nil	end	local layer = GridMgr.getConfig("gmc_item_layer")	local sprite = CCSprite:create("door_opened.png")	layer:addChild(sprite)	sprite:setPosition(self:getConfig("position"))		--打开门的粒子	local size = sprite:getContentSize()	local particle = CCParticleSystemQuad:create("fight_door_opened.plist")	sprite:addChild(particle)	particle:setPosition(ccp(size.width / 2, size.height / 2))end