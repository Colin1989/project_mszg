------------------------------------------------------------------------ 作者：lewis-- 日期：2013-3-31-- 描述： lua类----------------------------------------------------------------------NodePickupBloodBottle = class(NodeTapGird)--构造function NodePickupBloodBottle:ctor()	self.mSkillId = 0endfunction NodePickupBloodBottle:init(girdId, skillId)	self.mGridId = girdId	self.mSkillId = skillIdend--计算环境变量function NodeOpenDoor:calcEnvir()	AIMgr.updateEnvir("blood_bottle_cnt", 1)end--计算权值function NodePickupBloodBottle:calc()	local player = RoleMgr.getConfig("rmc_player_object")	local id = self.mSkillId	local level = player.mData.mSkill:getLevel(id)	local attribute = player.mData.mAttribute	local atk = attribute:getByName("atk")	local life = attribute:getByName("life")	local maxlife = attribute:getMaxAttrWithName("life")	local dp, hp = SkillMgr.calDamageValue(id, level, atk)	local health = dp + hp	if maxlife - life > health then		self.mEvaluation = 1000	else		--优先级高于开门		self.mEvaluation = math.random(10, 20)	endend		