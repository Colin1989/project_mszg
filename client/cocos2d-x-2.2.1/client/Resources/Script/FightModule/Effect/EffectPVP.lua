------------------------------------------------------------------------ 作者：lewis-- 日期：2013-5-23-- 描述：竞技场开场----------------------------------------------------------------------EffectPVP = class(EffectPlayerCast)--构造function EffectPVP:ctor()end--初始化function EffectPVP:init()end--执行function EffectPVP:play()	local function exitCB(sender)		sender:removeFromParentAndCleanup(true)		self:over()	end	local parent = EffectMgr.getConfig("emc_front_layer")		--背景遮罩	local mask = self:createMask()	parent:addChild(mask)	local arr = CCArray:create()	arr:addObject(CCDelayTime:create(2.5))	arr:addObject(CCCallFuncN:create(exitCB))	mask:runAction(CCSequence:create(arr))		--图层	local layer = CCLayer:create()	mask:addChild(layer, 1000)	layer:setPosition(ccp(0, 0))	--背景	local bg = CCSprite:create("match_enter_bg.png")	layer:addChild(bg)	bg:setPosition(ccp(320, 480))		local arr = CCArray:create()	arr:addObject(CCFadeIn:create(0.3))	arr:addObject(CCDelayTime:create(2.3))	bg:runAction(CCSequence:create(arr))		local filename1 = ModelPlayer.getRoleUpAppence(ModelPlayer.getRoleType(), ModelPlayer.getAdvancedLevel()).heroicon	--print(filename1)		local player1 = CCSprite:create(filename1)	local size = player1:getContentSize()	layer:addChild(player1)	player1:setPosition(ccp(140 + 623, 524))	local name1 = self:playerName(ModelPlayer.getNickName())	player1:addChild(name1)	name1:setPosition(ccp(size.width / 2, -20))		local arr1 = CCArray:create()	arr1:addObject(CCDelayTime:create(0.3))	arr1:addObject(CCMoveBy:create(0.3, ccp(-650, 0)))	arr1:addObject(CCMoveBy:create(0.1, ccp(27, 0)))	player1:runAction(CCSequence:create(arr1))		local roleType = FightConfig.getConfig("fc_enemy_role_type")	local level = FightConfig.getConfig("fc_enemy_advanced_level")	local filename2 = ModelPlayer.getRoleUpAppence(roleType, level).heroicon	local player2 = CCSprite:create(filename2)	layer:addChild(player2)	player2:setPosition(ccp(500 - 623, 524))	player2:setFlipX(true)	local name2 = self:playerName(FightConfig.getConfig("fc_enemy_name"))	player2:addChild(name2)	name2:setPosition(ccp(size.width / 2, -20))		local arr2 = CCArray:create()	arr2:addObject(CCDelayTime:create(0.3))	arr2:addObject(CCMoveBy:create(0.3, ccp(650, 0)))	arr2:addObject(CCMoveBy:create(0.1, ccp(-27, 0)))	player2:runAction(CCSequence:create(arr2))endfunction EffectPVP:playerName(name)	local layer = CCLayer:create()	local color = ccc3(255, 255, 255)	local label = CommonFunc_createCCLabelTTF(ccp(0.5, 0.5), nil, nil, 19, color, name)	layer:addChild(label, 2)		local bg = CCScale9Sprite:create("monster_name_bg.png")	layer:addChild(bg)	local size = label:getContentSize()	size.width = size.width + 20	bg:setCapInsets(CCRectMake(11,11,11,11))	bg:setPreferredSize(size)	bg:setAnchorPoint(ccp(0.5,0.5))	return layerend